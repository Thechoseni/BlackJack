{"version":3,"sources":["buttonLayer.js"],"names":["cc","Class","extends","Component","properties","buttonDistributional","Node","buttonStop","buttonDouble","buttonDeal","endLayer","start","buttonMove","schedule","handBoom","x","node","width","runAction","moveTo","v2","onButtonDeal","vv","creatOtherCard","creatPlayerCard","creatComputerCard","onButtonStop","creatWinner","onButtonDouble","remaining","wager","computerCardNumberSum","sumComputer","playerCardNumberSum","sumPlayer","log","winner","active","i","computerCardNumber","length","playerCardNumber"],"mappings":"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","file":"buttonLayer.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\game","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        buttonDistributional: cc.Node,\r\n        buttonStop: cc.Node,\r\n        buttonDouble: cc.Node,\r\n        buttonDeal: cc.Node,\r\n        endLayer: cc.Node,\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        this.buttonMove();\r\n        this.schedule(this.handBoom, 0.5);\r\n    },\r\n\r\n    // update (dt) {},\r\n    buttonMove() {\r\n        let x = this.node.width / 8;\r\n        this.buttonDistributional.runAction(cc.moveTo(0.1, cc.v2(-3 * x, 15)));\r\n        this.buttonStop.runAction(cc.moveTo(0.2, cc.v2(-x, 15)));\r\n        this.buttonDouble.runAction(cc.moveTo(0.3, cc.v2(x, 15)));\r\n        this.buttonDeal.runAction(cc.moveTo(0.4, cc.v2(3 * x, 15)));\r\n    },\r\n\r\n    //按钮事件\r\n    onButtonDeal() {\r\n        cc.vv.creatOtherCard.creatPlayerCard();\r\n        cc.vv.creatOtherCard.creatComputerCard();\r\n    },\r\n    onButtonStop() {\r\n        this.creatWinner();\r\n    },\r\n    onButtonDouble() {\r\n        cc.vv.remaining -= cc.vv.wager;\r\n        cc.vv.wager += cc.vv.wager;\r\n    },\r\n\r\n    //爆牌判断\r\n    handBoom() {\r\n        let computerCardNumberSum = this.sumComputer();\r\n        let playerCardNumberSum = this.sumPlayer();\r\n        if (computerCardNumberSum > 21 && playerCardNumberSum <= 21) {\r\n            cc.log(\"玩家获胜\");\r\n            cc.vv.winner = \"computerHandBoom\"\r\n            this.endLayer.active = true;\r\n        }\r\n        else if (playerCardNumberSum > 21 && computerCardNumberSum <= 21) {\r\n            cc.log(\"电脑获胜\");\r\n            cc.vv.winner = \"playerHandBoom\"\r\n            this.endLayer.active = true;\r\n        }\r\n        else if (playerCardNumberSum > 21 && computerCardNumberSum > 21) {\r\n            cc.log(\"平局\");\r\n            cc.vv.winner = \"draw\";\r\n            this.endLayer.active = true;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    },\r\n    //判断胜者\r\n    creatWinner() {\r\n        let computerCardNumberSum = this.sumComputer();\r\n        let playerCardNumberSum = this.sumPlayer();\r\n        if (computerCardNumberSum == playerCardNumberSum) {\r\n            cc.log(\"平局\");\r\n            cc.vv.winner = \"draw\"\r\n            this.endLayer.active = true;\r\n        }\r\n        else if (computerCardNumberSum > playerCardNumberSum) {\r\n            cc.log(\"电脑获胜\");\r\n            cc.vv.winner = \"computerWin\"\r\n            this.endLayer.active = true;\r\n        }\r\n        else {\r\n            cc.log(\"玩家获胜\");\r\n            cc.vv.winner = \"playerWin\"\r\n            this.endLayer.active = true;\r\n        }\r\n    },\r\n    sumComputer() {\r\n        let computerCardNumberSum = 0;\r\n        for (let i = 0; i < cc.vv.computerCardNumber.length; i++) {\r\n            if (cc.vv.computerCardNumber[i] > 1 && cc.vv.computerCardNumber[i] <= 10) {\r\n                computerCardNumberSum += cc.vv.computerCardNumber[i];\r\n            }\r\n            else if (cc.vv.computerCardNumber[i] > 10) {\r\n                computerCardNumberSum += 10;\r\n            }\r\n            else if (cc.vv.computerCardNumber[i] == 1) {\r\n                if (computerCardNumberSum + 11 > 21) {\r\n                    computerCardNumberSum += 1;\r\n                }\r\n                else {\r\n                    computerCardNumberSum += 11;\r\n                }\r\n            }\r\n            else {\r\n                computerCardNumberSum += cc.vv.computerCardNumber[i];\r\n            }\r\n        }\r\n        //cc.log(computerCardNumberSum);\r\n        return computerCardNumberSum;\r\n    },\r\n    sumPlayer() {\r\n        let playerCardNumberSum = 0;\r\n\r\n        for (let i = 0; i < cc.vv.playerCardNumber.length; i++) {\r\n            if (cc.vv.playerCardNumber[i] > 1 && cc.vv.playerCardNumber[i] <= 10) {\r\n\r\n                playerCardNumberSum += cc.vv.playerCardNumber[i];\r\n            }\r\n            else if (cc.vv.playerCardNumber[i] > 10) {\r\n\r\n                playerCardNumberSum += 10;\r\n            }\r\n            else if (cc.vv.playerCardNumber[i] == 1) {\r\n                if (playerCardNumberSum + 11 > 21) {\r\n\r\n                    playerCardNumberSum += 1;\r\n                }\r\n                else {\r\n\r\n                    playerCardNumberSum += 11;\r\n                }\r\n            }\r\n            else {\r\n                playerCardNumberSum += cc.vv.playerCardNumber[i];\r\n            }\r\n        }\r\n\r\n        return playerCardNumberSum;\r\n    },\r\n});\r\n"]}